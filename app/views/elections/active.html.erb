<div class="main-body">

  <% if elections.length == 0 %>
    <div>
      <p>There are no active elections as of now, check back later!</p>
    </div>
  <% end %>

  <% user_id = current_user_info&.[](:user)&.id %>

  <% elections.each do |election| %>
    <div class="active-elections-card">
      <% if is_admin
           # wrap with link, if admin %>
        <a href="/elections/<%= election.id %>" style="text-decoration: none">
      <% end %>
      <div class="active-election-card-left">
        <h3><%= election.name %></h3>
      </div>
      <% if is_admin %>
        </a>
      <% end %>
      <% if current_user_info && is_admin %>
        <%= form_with(url: "/elections/#{election.id}/end", method: "PATCH") do %>
          <button class="btn btn-danger" onclick="this.form.submit()">End</button>
        <% end %>
      <% elsif election.voter_participations.find_by(voter_id: user_id) %>
        <button class="btn btn-info">Already Voted. Wait for results.</button>
      <% else %>
        <a href="/vote/<%= election.id %>" class="btn btn-outline-secondary">Vote!</a>
      <% end %>
    </div>
  <% end %>
</div>